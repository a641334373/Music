{"version":3,"sources":["components/header/header.js","components/loading/loading.js","tools/toos.js","components/list/list.js","components/audio/audio.js","components/pic/pic.js","components/loading/drag.js","components/lyric/lyric.js","App.js","store/store.js","index.js"],"names":["HeaderUI","react_default","a","createElement","id","this","props","isiconBack","onTouchStart","handleGoHistory","isMusicName","window","history","go","Component","Header","connect","state","MusicId","isMusicId","ClassActive","isClassActive","islistIcon","dispatch","iconBack","type","payload","changeMusicName","name","setPathName","Loading","className","getSessionStorage","key","sessionStorage","getItem","ListUI","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","SongsList","isActive","isLoading","isMove","handleTouchEnd","bind","assertThisInitialized","handleTouchMove","_this2","map","item","index","onTouchMove","onTouchEnd","title","author","loading_loading","_this3","setLyricRunning","data","setState","JSON","parse","axios","post","TransCode","OpenId","Body","SongListId","then","res","value","ErrCode","songs","stringify","setItem","nextSibling","AddMusicId","push","changeMusicPlay","AddNextId","i","length","AddNextMusicId","List","AudioUI","PlayBtnChange","ref","src","musicBarDrag","isMusicPlay","playMusic","pauseMusic","refs","PlayBtn","style","backgroundImage","audioElement","play","isMusicPlayCtrl","listenRun","setInterval","pause","isMusicPausedCtrl","clearInterval","paused","audioNow","audioBar","scale","currentTime","duration","left","parentNode","offsetWidth","width","isListNextId","disX","ontouchstart","ev","touch","changedTouches","pageX","offsetLeft","document","ontouchmove","widthL","error","ontouchend","Audio","isLyricRunning","PicUI","fid","ChangeLyric","alt","PicId","PicPlay","picRollAction","picRollStop","picEle","animationPlayState","Pic","PathName","isPathName","Frag","backStart","canvas","ctx","center","positions","velocities","lifeSpans","hues","PI","Math","cos","sin","random","TAU","rand","n","randIn","min","max","fadeIn","t","m","starCount","resize","_window","innerWidth","innerHeight","b","height","resetStar","iy","rd","rt","cx","sy","x","y","rv","vx","vy","h","ttl","drawStar","tx","ty","l","dl","c","concat","save","lineWidth","lineCap","strokeStyle","beginPath","moveTo","lineTo","stroke","closePath","restore","checkBounds","draw","clearRect","fillStyle","fillRect","filter","drawImage","globalCompositeOperation","requestAnimationFrame","addEventListener","body","appendChild","getContext","Float32Array","createStars","LyricUI","lyricList","lyricHeight","lyricActive","forTimeClear","lyric","match","params","get","formatLyric","playLyric","pausedLyric","_this4","result","replace","$0","$1","$2","time","timeArr","split","parseFloat","toFixed","lyricRunning","timer","_this5","lyricUL","audioE","getElementById","lyricListTime","top","isLyricHieght","err","Lyric","setLyricHieght","App","BrowserRouter","header_header","Switch","Route","path","component","Redirect","from","to","audio_audio","loading_drag","reducer","combineReducers","arguments","undefined","action","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","es","src_App_0"],"mappings":"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","file":"static/js/main.7ebfe59a.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './header.css';\r\nimport {connect} from'react-redux';\r\nclass HeaderUI extends Component {\r\n\r\n  render() {\r\n    return (\r\n\t\t<div id=\"musicHeader\">\r\n\t\t{this.props.isiconBack && <span onTouchStart={this.handleGoHistory}>&lt;</span> }{this.props.isMusicName?'正在播放:'+this.props.isMusicName:'菜狗音乐'}\r\n\t     </div>\r\n    );\r\n  }\r\n  handleGoHistory(){\r\n\twindow.history.go(-1);\r\n  }\r\n}\r\nfunction mapstateToprops(state){\r\n\t// console.log(state.isMusicName)\r\n\treturn{\r\n\t\tMusicId : state.isMusicId,\r\n\t\tClassActive:state.isClassActive,\r\n\t\tisiconBack:state.islistIcon,\r\n\t\tisMusicName:state.isMusicName\r\n\t}\r\n}\r\nfunction mapdispatchToprops(dispatch){\r\n\treturn {\r\n\t\ticonBack(){\r\n\t\t\tdispatch({ type:'IS_ICON_BACK',payload:false })\r\n\t\t},\r\n\t\tchangeMusicName(name){\r\n\t\t\tdispatch({type:'IS_CHANGE_NAME',payload:name})\r\n\t\t},\r\n\t\tsetPathName(){\r\n\t\t\tdispatch({type:'IS_CHANGE_PATHNAME',payload:'list'})\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nvar Header = connect(mapstateToprops , mapdispatchToprops)(HeaderUI);\r\n\r\nexport default Header;\r\n","import React ,{ Component }from 'react';\r\nimport './loading.css';\r\nclass Loading extends Component{\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t\t<div className=\"loading\">Loading&#8230;</div>\r\n\t\t)\r\n\t}\r\n}\r\nexport default Loading;","function setSessionStorage( key , value){\r\n     window.sessionStorage.setItem( key , value)\r\n}\r\nfunction getSessionStorage( key ){\r\n    return window.sessionStorage.getItem( key )\r\n}\r\n\r\nexport{\r\n    setSessionStorage,\r\n    getSessionStorage\r\n}","import React, { Component } from 'react';\r\nimport './list.css';\r\nimport {connect} from'react-redux';\r\nimport axios from'axios';\r\nimport Loading from'../loading/loading.js';\r\nimport {setSessionStorage , getSessionStorage} from '../../tools/toos.js'\r\n\r\nclass ListUI extends Component {\r\n\r\n\r\n\tconstructor(){\r\n\t\tsuper()\r\n\t\tthis.state={\r\n\t\t\tSongsList:[],\r\n\t\t\tisActive:2,\r\n\t\t\tisLoading:false\r\n\t\t}\r\n\t\tthis.isMove = false;\r\n\t\tthis.handleTouchEnd = this.handleTouchEnd.bind(this)\r\n\t\tthis.handleTouchMove = this.handleTouchMove.bind(this)\r\n\t}\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"musicList\">\r\n\t\t\t{\r\n\t\t\t\tthis.state.isLoading?<ul>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.SongsList.map((item,index)=>{\r\n\t\t\t\t\t\t// className={this.props.MusicId===item.id?this.props.ClassActive:''}\r\n\t\t\t\t \t\treturn \t<li className={ this.props.MusicId === item.id ?'active':''}  key={item.id} onTouchMove={this.handleTouchMove} onTouchEnd={()=>this.handleTouchEnd(item.id,item.title)} >\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"listOrder\">{index+1}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"listName\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h3>{item.title}</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{item.author}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</ul> :<Loading/>\r\n\r\n\t\t\t}\r\n\t\t\t\r\n\t\t</div>\r\n    );\r\n  }\r\n  componentDidMount(){\r\n\t\r\n\t  this.props.setLyricRunning()\r\n\t//   小图标返回及显示 \r\n\t\tthis.props.iconBack()\r\n\t// 获取sessionStorage\r\n\tvar data = getSessionStorage('songsList')\r\n\tif(data){\r\n\t\tthis.setState({\r\n\t\t\tSongsList:JSON.parse(data),\r\n\t\t\tisLoading:true \r\n\t\t\t})\r\n\t}else{\r\n\t\taxios.post('/api/index/index',{\r\n\t\t\t\"TransCode\":\"020111\",\r\n\t\t\t\"OpenId\":\"Test\", \r\n\t\t\t\"Body\":{\"SongListId\":\"141998290\"}\r\n\t\t}).then((res)=>{\r\n\t\t\t// console.log(res.data.Body.songs)\r\n\t\t\tif(res.data.ErrCode === \"OK\")\r\n\t\t\tthis.setState({\r\n\t\t\t\tSongsList:res.data.Body.songs,\r\n\t\t\t\tisLoading:true\t\r\n\t\t\t\t})\r\n\t\t\t\t//设定sessionStorage\r\n\t\t\tsetSessionStorage('songsList',JSON.stringify(res.data.Body.songs))\r\n\t\t})\r\n\t}\r\n\r\n\r\n\t\t\r\n\t\t\r\n\r\n\r\n\t}\r\n\thandleTouchMove(){\r\n\t\t\tthis.isMove = true\r\n\t}\r\n\thandleTouchEnd(id,name,nextSibling){\r\n\t\tif(this.isMove){\r\n\t\t\tthis.isMove = false\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.props.AddMusicId(id) \r\n\t\t\tthis.props.history.push('/pic/'+id)\r\n\t\t\tthis.props.changeMusicPlay()\r\n\t\t\tthis.props.changeMusicName(name)\r\n\t\t\tthis.AddNextId()\r\n\t\t}\r\n\t}\r\n\tAddNextId(){\r\n\t\t\r\n\t\tvar data =JSON.parse(getSessionStorage('songsList')) \r\n\t\tfor(var i =0 ; i<data.length;i++){\r\n\t\t\t\r\n\t\t\tif(data[i].id === this.props.MusicId){\r\n\t\t\t\tthis.props.AddNextMusicId(data[i+1])\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n}\r\nfunction mapstateToprops(state){\r\n\t// console.log(state.isListNextId)\r\n\treturn{\r\n\t\tMusicId : state.isMusicId,\r\n\t\tClassActive:state.isClassActive,\r\n\t}\r\n}\r\nfunction mapdispatchToprops(dispatch){\r\n\treturn {\r\n\t\ticonBack(){\r\n\t\t\tdispatch({ type:'IS_ICON_BACK',payload:false })\r\n\t\t},\r\n\t\tAddMusicId(id){\r\n\t\t\tdispatch({type:'IS_MUSIC_CHANGE',payload:id})\r\n\t\t},\r\n\t\tAddNextMusicId(id){\r\n\t\t\tdispatch({type:'IS_MUSIC_NextId',payload:id})\r\n\t\t},\r\n\t\tchangeMusicPlay(){\r\n\t\t\tdispatch({type:'IS_MUSIC_PLAY',payload:true})\r\n\t\t},\r\n\t\tchangeMusicName(name){\r\n\t\t\tdispatch({type:'IS_CHANGE_NAME',payload:name})\r\n\t\t},\r\n\t\tsetPathName(){\r\n\t\t\tdispatch({type:'IS_CHANGE_PATHNAME',payload:'list'})\r\n\t\t},\r\n\t\tsetLyricRunning(){\r\n\t\t\tdispatch({type:'IS_CHANGE_LyricRunning',payload:'list'})\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nvar List = connect(mapstateToprops , mapdispatchToprops)(ListUI);\r\n\r\nexport default List;\r\n","import React, { Component } from 'react';\r\nimport './audio.css';\r\nimport {connect} from'react-redux';\r\nimport { getSessionStorage} from '../../tools/toos.js'\r\nclass AudioUI extends Component {\r\n\tconstructor(){\r\n\t\tsuper()\r\n\t\tthis.PlayBtnChange = this.PlayBtnChange.bind(this)\r\n\t}\r\n  render() {\r\n    return (\r\n      <div id=\"musicAudio\">\r\n\t\t\t\t<div ref='PlayBtn' className=\"audioPlay\" onTouchStart={this.PlayBtnChange}></div>\r\n\t\t\t\t<div className=\"audioProgress\" ref=\"audioProgess\">\r\n\t\t\t\t\t<div className=\"audioBar\" ref=\"audioBar\"></div>\r\n\t\t\t\t\t<div className=\"audioNow\" ref=\"audioNow\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t{/* <audio autoPlay src={\"https://api.hibai.cn/music/Music/Music?id=1210461&type=url\"}></audio> */}\r\n\t\t\t<audio ref='audioElement' id='audioE'   src={\"https://api.hibai.cn/music/Music/Music?id=\"+this.props.isMusicId+\"&type=url\"}></audio>\r\n\t  \t</div>\r\n\t\t\t\r\n\t\t);\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\tthis.musicBarDrag()\r\n\t}\r\n\tcomponentDidUpdate(){\r\n\t\tthis.musicBarDrag()\r\n\t\t// console.log(this.props.isMusicPlay+'更新')\r\n\t\tif(this.props.isMusicPlay){\r\n\t\t\tthis.playMusic()\r\n\t\t}else{\r\n\t\t\tthis.pauseMusic()\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t// 当前播放状态：开始\r\n\tplayMusic(){\r\n\t\tthis.refs.PlayBtn.style.backgroundImage='url(/images/list_audioPause.png)';\r\n\t\tthis.refs.audioElement.play();\r\n\t\tthis.props.isMusicPlayCtrl()\r\n\t\t// 监听播放情况 \r\n\t\tthis.listenRun.bind(this)\r\n\t\tsetInterval(this.listenRun.bind(this), 1000);\r\n\t\t\r\n\t}\r\n\t// 当前播放状态:暂停\r\n\tpauseMusic(){\r\n\t\tthis.refs.PlayBtn.style.backgroundImage='url(/images/list_audioPlay.png)'\r\n\t\tthis.refs.audioElement.pause();\r\n\t\tthis.props.isMusicPausedCtrl();\r\n\t\t// 清除定时器\r\n\t\tclearInterval(this.listenRun.bind(this))\r\n\t\t\r\n\t}\r\n\tPlayBtnChange(){\r\n\t\tif(!this.props.isMusicId){\r\n\t\t\r\n\t\t}\r\n\t\tif(this.refs.audioElement.paused){\r\n\t\t\tthis.playMusic()\r\n\t\t}else{\r\n\t\t\tthis.pauseMusic()\r\n\t\t}\r\n\t}\r\n\tlistenRun(){\r\n\t\tvar audioNow = this.refs.audioNow;\r\n\t\tvar audioBar = this.refs.audioBar;\r\n\t\tvar audioElement = this.refs.audioElement;\r\n\t\tvar scale =audioElement.currentTime/audioElement.duration;\r\n\t\taudioBar.style.left = scale*(audioBar.parentNode.offsetWidth - 7)+'px';\r\n\t\taudioNow.style.width = scale*100+'%';\r\n\t\tif(scale === 1){\r\n\t\t\t\r\n\t\t\tthis.props.isMusicPausedCtrl();\r\n\t\t\tthis.pauseMusic()\r\n\t\t\taudioNow.style.width = '0%';\r\n\t\t\taudioBar.style.left = '-7px';\r\n\r\n\t\t\tif(this.props.AddMusicId!==this.props.isListNextId.id){\r\n\t\t\t\tthis.props.AddMusicId(this.props.isListNextId.id);\r\n\t\t\t\tthis.props.changeMusicName(this.props.isListNextId.title)\r\n\t\t\t\tthis.props.isMusicPlayCtrl()\r\n\t\t\t\tthis.playMusic()\r\n\t\t\t\t// setTimeout(() => {\r\n\t\t\t\t\tthis.AddNextId()\r\n\t\t\t\t// }, 1000);\r\n\t\t\t}\t\r\n\t\t}\t\r\n\t}\r\n\tAddNextId(){\r\n\r\n\t\tvar data =JSON.parse(getSessionStorage('songsList')) \r\n\t\tfor(var i =0 ; i<data.length;i++){\r\n\t\t\tif(data[i].id === this.props.isMusicId){\r\n\t\t\t\tthis.props.AddNextMusicId(data[i+1])\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tmusicBarDrag(){\r\n\t\tvar disX = 0;\r\n\t\t// 得到this的指向\r\n\t\tvar audioNow = this.refs.audioNow;\r\n\t\tvar audioBar = this.refs.audioBar;\r\n\t\tvar audioElement = this.refs.audioElement;\r\n\t\t\r\n\t\taudioBar.ontouchstart = function(ev){\r\n\t\t\t\tvar touch =ev.changedTouches[0];\r\n\t\t\t\tdisX =touch.pageX - this.offsetLeft;\r\n\t\t\t\tdocument.ontouchmove = (ev)=>{\r\n\t\t\t\t\tvar touch = ev.changedTouches[0];\r\n\t\t\t\t\tvar widthL = touch.pageX - disX;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif(widthL < -7){\r\n\t\t\t\t\t\t\twidthL=-7;\r\n\t\t\t\t\t\t}else if(widthL>this.parentNode.offsetWidth-7){\r\n\t\t\t\t\t\t\twidthL = this.parentNode.offsetWidth-7\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 限制小球移动范围\r\n\t\t\t\t\tthis.style.left = widthL +'px';\r\n\t\t\t\t\tvar scale = (widthL+7) /this.parentNode.offsetWidth;\r\n\t\t\t\t\t// console.log(scale)\r\n\t\t\t\t\taudioNow.style.width =scale * 100+'%';\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\taudioElement.currentTime = scale*audioElement.duration;\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t};\r\n\t\t\t\tdocument.ontouchend = function(){\r\n\t\t\t\t\tdocument.ontouchmove = document.ontouchend = null;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t}\r\n}\r\nfunction mapStateToProps(state){\r\n\treturn {\r\n\t\tisMusicId:state.isMusicId,\r\n\t\tisMusicPlay:state.isMusicPlay,\r\n\t\tisLyricRunning:state.isLyricRunning,\r\n\t\tisListNextId:state.isListNextId\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch){\r\n\treturn {\r\n\t\t// 修改后台播放状态\r\n\t\tisMusicPlayCtrl(){\r\n\t\t\tdispatch({type:'IS_MUSIC_PLAY',payload:true})\r\n\t\t},\r\n\t\t// 修改后台播放状态\r\n\t\tisMusicPausedCtrl(){\r\n\t\t\tdispatch({type:'IS_MUSIC_PLAY',payload:false})\r\n\t\t},\r\n\t\tAddMusicId(id){\r\n\t\t\tdispatch({type:'IS_MUSIC_CHANGE',payload:id})\r\n\t\t},\r\n\t\tAddNextMusicId(id){\r\n\t\t\tdispatch({type:'IS_MUSIC_NextId',payload:id})\r\n\t\t},\r\n\t\tchangeMusicName(name){\r\n\t\t\tdispatch({type:'IS_CHANGE_NAME',payload:name})\r\n\t\t},\r\n\t}\r\n}\r\n\r\n\r\nvar Audio = connect(mapStateToProps,mapDispatchToProps)(AudioUI)\r\nexport default Audio;\r\n","import React, { Component } from 'react';\r\nimport './pic.css';\r\nimport {connect} from'react-redux';\r\nclass PicUI extends Component{\r\n\tconstructor(){\r\n\t\tsuper()\r\n\t\tthis.state={\r\n\t\t\tfid:''\r\n\t\t}\r\n\t\tthis.ChangeLyric = this.ChangeLyric.bind(this)\r\n\t}\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div id='pic'>\r\n\t\t\t\t<div className='picRoll' ref='picEle' onTouchStart={this.ChangeLyric}>\r\n\t\t\t\t\t<img alt='' src={'https://api.hibai.cn/music/Music/Music?id='+this.props.PicId+'&type=pic'}/>\r\n\t\t\t\t</div>\t\t\t\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\tthis.props.setLyricRunning()\r\n\t\tthis.setState({\r\n\t\t\tfid:this.props.PicId\r\n\t\t})\r\n\t\tthis.props.iconBack()\r\n\t\tif(this.props.PicPlay){\r\n\t\t\tthis.picRollAction()\r\n\t\t}else{\r\n\t\t\tthis.picRollStop()\r\n\t\t}\r\n\t\t\r\n\t}\r\n\tcomponentDidUpdate(){\r\n\t\tthis.props.setPathName()\r\n\t\tif(this.props.PicPlay){\r\n\t\t\tthis.picRollAction()\r\n\t\t}else{\r\n\t\t\tthis.picRollStop()\r\n\t\t}\r\n\t}\r\n\tpicRollAction(){\r\n\t\tthis.refs.picEle.style.animationPlayState='running'\r\n\r\n\t}\r\n\tpicRollStop(){\r\n\t\tthis.refs.picEle.style.animationPlayState='paused'\r\n\t}\r\n\tChangeLyric(){\r\n\t\tthis.props.history.push('/lyric/'+this.state.fid)\r\n\t\t}\r\n\t}\r\nfunction MapStateToProps(state){\r\n\t// console.log( state.isLyricRunning)\r\n\treturn{\r\n\t\tPathName:state.isPathName,\r\n\t\tPicId : state.isMusicId,\r\n\t\tPicPlay : state.isMusicPlay\r\n\t}\r\n}\r\nfunction MapDispatchToProps(dispatch){\r\n\r\n\treturn{\r\n\t\ticonBack(){\r\n\t\t\tdispatch({ type:'IS_ICON_BACK',payload:true })\r\n\t\t},\r\n\t\tsetPathName(){\r\n\t\t\tdispatch({type:'IS_CHANGE_PATHNAME',payload:'pic'})\r\n\t\t},\r\n\t\tsetLyricRunning(){\r\n\t\t\tdispatch({type:'IS_CHANGE_LyricRunning',payload:'pic'})\r\n\t\t}\r\n\t}\r\n}\r\nvar Pic = connect(MapStateToProps,MapDispatchToProps)(PicUI)\r\nexport default Pic","import React ,{ Component }from 'react';\r\nimport \"./drag.css\";\r\n\r\nclass Frag extends Component{\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t\t<div>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\tthis.backStart()\r\n\t}\r\n\tbackStart(){\r\nconst { PI, cos, sin, random} = Math;\r\nconst TAU = 2 * PI;\r\nconst rand = n => n * random();\r\nconst randIn = (min, max) => rand(max - min) + min;\r\nconst fadeIn = (t, m) => t / m;\r\n\r\nconst starCount = 1000;\r\n\r\nlet canvas;\r\nlet ctx;\r\nlet center;\r\nlet positions;\r\nlet velocities;\r\nlet lifeSpans;\r\nlet hues;\r\n\r\nfunction setup() {\r\n\tcreateCanvas();\r\n\tcreateStars();\r\n\tdraw();\r\n}\r\n\r\nfunction createCanvas() {\r\n\tcanvas = {\r\n\t\ta: document.createElement(\"canvas\"),\r\n\t\tb: document.createElement(\"canvas\")\r\n\t};\r\n\tcanvas.b.style = `\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t`;\r\n\tdocument.body.appendChild(canvas.b);\r\n\tctx = {\r\n\t\ta: canvas.a.getContext(\"2d\"),\r\n\t\tb: canvas.b.getContext(\"2d\")\r\n\t};\r\n\tcenter = [];\r\n\tresize();\r\n}\r\n\r\nfunction resize() {\r\n\tconst { innerWidth, innerHeight } = window;\r\n\t\r\n\tcanvas.a.width = canvas.b.width = innerWidth;\r\n\tcanvas.a.height = canvas.b.height = innerHeight;\r\n\t\r\n\tcenter[0] = 0.5 * innerWidth;\r\n\tcenter[1] = 0.5 * innerHeight;\r\n}\r\n\r\nfunction checkBounds(x, y) {\r\n\treturn(\r\n\t\tx > canvas.a.width ||\r\n\t\tx < 0 ||\r\n\t\ty > canvas.a.height ||\r\n\t\ty < 0\r\n\t);\r\n}\r\n\r\nfunction createStars() {\r\n\tpositions = new Float32Array(starCount * 2);\r\n\tvelocities = new Float32Array(starCount * 2);\r\n\thues = new Float32Array(starCount);\r\n\tlifeSpans = new Float32Array(starCount * 2);\r\n\r\n\tlet i;\r\n\t\r\n\tfor (i = 0; i < starCount * 2; i += 2) {\r\n\t\tresetStar(i);\r\n\t}\r\n}\r\n\r\nfunction resetStar(i) {\r\n\tlet iy, rd, rt, cx, sy, x, y, rv, vx, vy, h, l, ttl;\r\n\t\r\n\tiy = i + 1;\r\n\trd = rand(100);\r\n\trt = rand(TAU);\r\n\tcx = cos(rt);\r\n\tsy = sin(rt);\r\n\tx = center[0] + cx * rd;\r\n\ty = center[1] + sy * rd;\r\n\trv = randIn(0.1,1);\r\n\tvx = rv * cx;\r\n\tvy = rv * sy;\r\n\th = rand(360);\r\n\tl = 0;\r\n\tttl = randIn(20,100);\r\n\t\r\n\tpositions[i] = x;\r\n\tpositions[iy] = y;\r\n\tvelocities[i] = vx;\r\n\tvelocities[iy] = vy;\r\n\thues[0.5 * i | 0] = h;\r\n\tlifeSpans[i] = l;\r\n\tlifeSpans[iy] = ttl;\r\n}\r\n\r\nfunction drawStar(i) {\r\n\tlet iy, x, y, tx, ty, vx, vy, h, l, dl, ttl, c;\r\n\r\n\tiy = i + 1;\r\n\tx = positions[i];\r\n\ty = positions[iy];\r\n\tvx = velocities[i];\r\n\tvy = velocities[iy];\r\n\ttx = x + vx;\r\n\tty = y + vy;\r\n\tvx *= 1.15;\r\n\tvy *= 1.15;\r\n\th = hues[0.5 * i | 0];\r\n\tl = lifeSpans[i];\r\n\tttl = lifeSpans[iy];\r\n\tdl = fadeIn(l, ttl);\r\n\tc = `hsla(${h},50%,80%,1)`;\r\n\r\n\tl++;\r\n\t\r\n\tctx.a.save();\r\n\tctx.a.lineWidth = dl;\r\n\tctx.a.lineCap = 'round';\r\n\tctx.a.strokeStyle = c;\r\n\tctx.a.beginPath();\r\n\tctx.a.moveTo(x, y);\r\n\tctx.a.lineTo(tx, ty);\r\n\tctx.a.stroke();\r\n\tctx.a.closePath();\r\n\tctx.a.restore();\r\n\r\n\tpositions[i] = tx;\r\n\tpositions[iy] = ty;\r\n\tvelocities[i] = vx;\r\n\tvelocities[iy] = vy;\r\n\tlifeSpans[i] = l;\r\n\r\n\tcheckBounds(x, y) && resetStar(i);\r\n}\r\n\r\nfunction draw() {\r\n\tctx.a.clearRect(0,0,canvas.a.width,canvas.a.height);\r\n\tctx.b.clearRect(0,0,canvas.b.width,canvas.b.height);\r\n\t\r\n\tctx.b.fillStyle = 'rgba(0,0,0,0.5)';\r\n\tctx.b.fillRect(0,0,canvas.b.width,canvas.b.height);\r\n\t\r\n\tlet i;\r\n\t\r\n\tfor (i = 0; i < starCount * 2; i += 2) {\r\n\t\tdrawStar(i);\r\n\t}\r\n\t\r\n\tctx.b.save();\r\n\tctx.b.filter = 'blur(10px)';\r\n\tctx.b.drawImage(canvas.a, 0, 0);\r\n\tctx.b.restore();\r\n\t\r\n\tctx.b.save();\r\n\tctx.b.globalCompositeOperation = 'lighter';\r\n\tctx.b.drawImage(canvas.a, 0, 0);\r\n\tctx.b.restore();\r\n\t\r\n\twindow.requestAnimationFrame(draw);\r\n}\r\n\r\nwindow.addEventListener(\"load\", setup);\r\nwindow.addEventListener(\"resize\", resize);\r\n\t}\r\n}\r\nexport default Frag;","import React, { Component } from 'react';\r\nimport './lyric.css';\r\nimport { connect } from 'react-redux';\r\nimport axios from 'axios';\r\nclass LyricUI extends Component {\r\n  constructor(){\r\n  \tsuper();\r\n  \tthis.state = {\r\n      lyricList : [],\r\n      lyricHeight:21,\r\n      lyricActive:-1\r\n    };\r\n    this.forTimeClear = this.forTimeClear.bind(this)\r\n    this.ChangeLyric = this.ChangeLyric.bind(this)\r\n  }\t\r\n  render() {\r\n    return (\r\n      \t<div id=\"musicLyric\">\r\n\t\t\t<ul ref='lyricUL' onTouchStart={this.ChangeLyric}>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.lyricList.map((item,index)=>{\r\n\t\t\t\t\t\treturn <li className={this.state.lyricActive === index?'active':''} key={index} >{ item.lyric }</li>;\r\n\t\t\t\t\t})\r\n\t\t\t\t} \r\n\t\t\t</ul>\r\n\t\t</div>\r\n    );\r\n  }\r\n  componentDidMount(){\r\n    this.props.iconBack();\r\n    this.props.setLyricRunning()\r\n    var fid = this.props.match.params.fid;\r\n      axios.get('/music/Music/Music?id='+fid+'&type=lrc').then((res)=>{  \r\n        this.setState({\r\n          lyricList : this.formatLyric(res.data)\r\n        });\r\n        // setSessionStorage('LyricList'+fid,JSON.stringify(res.data))\r\n      });\r\n    }\r\n  \r\n  componentDidUpdate(){\r\n    if(this.props.isLyricRunning === 'lyric'){\r\n      if(this.props.isMusicPlay){\r\n        this.playLyric()\r\n      }else{\r\n        this.pausedLyric()\r\n      }\r\n  }\r\n  }\r\n  componentWillUnmount(){\r\n    this.pausedLyric()\r\n  }\r\n  formatLyric(data){\r\n\tvar result = [];\r\n\tvar re = /\\[([^\\]]+)\\]([^[]+)/g;\r\n\t\r\n\tdata.replace(re,($0,$1,$2)=>{ \r\n\t\tresult.push( { time :this.forTimeClear($1) , lyric : $2 } );\r\n  })\r\n  // console.log(result)\r\n    return result\r\n  }\r\n  forTimeClear(time){\r\n    var timeArr = time.split(':');\r\n    return (parseFloat(timeArr[0])*60+parseFloat(timeArr[1])).toFixed(2)\r\n  }\r\n  playLyric(){\r\n   window.setInterval(this.lyricRunning.bind(this),2000)\r\n\r\n  }\r\n  pausedLyric(){\r\n    clearInterval(this.timer)\r\n  }\r\n  ChangePic(){\r\n\t\tthis.props.history.push('/lyric/'+this.state.fid)\r\n\t\t}\r\n\r\n  lyricRunning(){\r\n    var lyricUL = this.refs.lyricUL\r\n    var lyricList=this.state.lyricList\r\n    var audioE = document.getElementById('audioE')\r\n    \r\n     for(var i=0;i<lyricList.length;i++){\r\n      try {\r\n        var lyricListTime = lyricList[i].time||50\r\n      } catch (error) {\r\n        \r\n      }\r\n      try{\r\n      if(audioE.currentTime >lyricListTime && audioE.currentTime<lyricList[i+1].time){\r\n        this.setState({\r\n          lyricActive : i,\r\n        })\r\n        if(i>5){\r\n            lyricUL.style.top = -(i-5)*(this.props.isLyricHieght+30)+'px'\r\n          if(lyricList.length-2 === i){\r\n                  this.pausedLyric();\r\n                  this.setState({\r\n                    lyricActive:lyricList.length -1\r\n                  })\r\n              \r\n          }\r\n\r\n        }\r\n        var fid = this.props.match.params.fid;\r\n      axios.get('/music/Music/Music?id='+fid+'&type=lrc').then((res)=>{  \r\n        this.setState({\r\n          lyricList : this.formatLyric(res.data)\r\n        });\r\n\r\n      });\r\n  \r\n\r\n      }\r\n       }catch(err){\r\n         \r\n       }\r\n     }\r\n  }\r\n\r\n  ChangeLyric(){\r\n\t\tthis.props.history.push('/pic/'+this.props.match.params.fid)\r\n\t\t}\r\n}\r\n\r\nfunction mapstateToprops(state){\r\n  // console.log(state.isLyricHieght)\r\n  return {\r\n    fid:state.isMusicId,\r\n    isMusicPlay:state.isMusicPlay,\r\n    isLyricRunning:state.isLyricRunning,\r\n    isLyricHieght:state.isLyricHieght\r\n\r\n  }\r\n}\r\nfunction mapdispatchToprops(dispatch){\r\n \r\n  return {\r\n    iconBack(){\r\n        dispatch({type:'IS_ICON_BACK',payload:'true'})\r\n    },\r\n    AddMusicId(id){\r\n\t\t\tdispatch({type:'IS_MUSIC_CHANGE',payload:id})\r\n    },\r\n    setLyricRunning(){\r\n\t\t\tdispatch({type:'IS_CHANGE_LyricRunning',payload:'lyric'})\r\n    },\r\n    setLyricHieght(height){\r\n\t\t\tdispatch({type:'IS_CHANGE_LyricHieght',payload:height})\r\n\t\t}\r\n  }\r\n}\r\n\r\nvar Lyric = connect(mapstateToprops,mapdispatchToprops)(LyricUI) \r\n\r\n\r\nexport default Lyric;\r\n","import React, { Component } from 'react';\r\nimport {BrowserRouter as Router , Route, Switch, Redirect }from'react-router-dom';\r\nimport './App.css';\r\n\r\nimport Header from './components/header/header.js';\r\nimport List from './components/list/list.js';\r\nimport Audio from './components/audio/audio.js';\r\nimport Pic from'./components/pic/pic.js';\r\nimport Drag from'./components/loading/drag.js';\r\nimport Lyric from './components/lyric/lyric.js';\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <div id='main'> \r\n            <Header />\r\n            <Switch>\r\n              <Route path='/list' component={ List }/>\r\n              <Route path ='/pic/:fid' component={Pic}/>  \r\n              <Route path='/lyric/:fid' component={Lyric}/>\r\n              <Redirect from='/*' to='/list' / >\r\n            </Switch>\r\n            <Audio/>\r\n            <Drag/>\r\n        </div>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import { createStore , combineReducers} from'redux'\r\n\r\nfunction isIconBack (state = true ,action){\r\n        if(action.type === 'IS_ICON_BACK'){\r\n            return action.payload\r\n        }else{\r\n            return state;\r\n        }\r\n}\r\nfunction MusicId (state ='',action){\r\n    if(action.type === 'IS_MUSIC_CHANGE'){\r\n        return action.payload\r\n    }else{\r\n        return state\r\n    }\r\n}\r\nfunction MusicPlay(state = false ,action){\r\n    if(action.type === 'IS_MUSIC_PLAY'){\r\n        return action.payload\r\n    }else{\r\n        return state\r\n    }\r\n}\r\nfunction MusicName(state = '',action){\r\n    if(action.type === 'IS_CHANGE_NAME'){\r\n        return action.payload\r\n    }else{\r\n        return state\r\n    }\r\n}\r\nfunction ClassActive(state = 'active',action){\r\n    if(action.type === 'IS_CHANGE_CLASS'){\r\n        return action.payload\r\n    }else{\r\n        return state\r\n    }\r\n}\r\nfunction PathName(state = 'pic',action){\r\n    if(action.type === 'IS_CHANGE_PATHNAME'){\r\n        return action.payload\r\n    }else{\r\n        return state\r\n    }\r\n}\r\nfunction LyricRunning(state = 'pic',action){\r\n    if(action.type === 'IS_CHANGE_LyricRunning'){\r\n        return action.payload\r\n    }else{\r\n        return state\r\n    }\r\n}\r\nfunction LyricHieght(state = 0,action){\r\n    if(action.type === 'IS_CHANGE_LyricHieght'){\r\n        return action.payload\r\n    }else{\r\n        return state\r\n    }\r\n}\r\nfunction ListNextId(state={} ,action ){\r\n    if(action.type === 'IS_MUSIC_NextId'){\r\n        return action.payload\r\n    }else{\r\n        return state\r\n    }\r\n}\r\nvar reducer = combineReducers({\r\n    isPathName:PathName,\r\n    islistIcon:isIconBack,\r\n    isMusicId:MusicId,\r\n    isMusicPlay:MusicPlay,\r\n    isMusicName:MusicName,\r\n    isClassActive:ClassActive,\r\n    isLyricRunning:LyricRunning,\r\n    isLyricHieght:LyricHieght,\r\n    isListNextId:ListNextId\r\n})\r\nvar store = createStore(reducer,window.__REDUX_DEVTOOLS_EXTENSION__&& window.__REDUX_DEVTOOLS_EXTENSION__())\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nimport { Provider } from 'react-redux';\r\nimport store from './store/store.js';\r\n\r\nReactDOM.render(<Provider store={store}><App /></Provider>, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}